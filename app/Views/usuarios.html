{% extends 'masterIncludes/master.html'%} {% block styles %} {% endblock %} {% block contenido %}
<div class="col-xl-1">
</div>
<div class="col-xl-10">
  <!-- Inicio de contenido -->
  <div class="m-portlet">
    <div class="m-portlet__head">
      <div class="m-portlet__head-caption">
        <div class="m-portlet__head-title">
          <h3 class="m-portlet__head-text theme_trebol_green_font"><i class="m-menu__link-icon icon-tittle  la la-user" style="font-size: 2.3rem;"></i>
Todos los usuarios</h3>
        </div>
      </div>
      <div class="m-portlet__head-tools">
        {% if usd.rol == 1%}
        <a href="/usuarios/nuevo/" class="new_item_1"><button class="btn btn-info m-btn m-btn--icon ">Crear nuevo usuario</button></a>
        {% endif %}
      </div>
    </div>
    <div class="m-portlet__body">
      <div class="buscador_form container-flex-row" style="margin-bottom: 1%">
        <div class="with-30"><input type="text" class="quicksearch form-control m-input" placeholder="Buscar usuario" /></div>
        <div class="with-30 filter-button-group" style="margin-left: 2%">
          <button class="button btn btn-info" data-filter=".item-inst " style="height: 3.3em;">Mostrar todos</button>
        </div>
      </div>
      <div class="grid">
        <section class="container-flex-row ie-search">
           {% for u in users %}
            <article class="item-inst close-child element-item transition metal {{u.active == 1 ? '': 'inactive'}} inst-edu inner-flex-inst " id="user_thumb_{{loop.index}}" data-category="transition" >
                    <div class="inst-icon" style="background: url({{u.image}}); background-size: cover; background-repeat: no-repeat;">
                    <div class="floating-icons">
                       <span><i class="la la-bullseye"></i></span><span>&nbsp;{{u.proyectos}}</span>
                    </div>
                    </div>
                    <div class="inst-content">             
                        <strong>
                            <h2 class="nombres">{{u.name}} {{u.last_name}}</h2>
                        </strong>
                        <span>@{{u.nick}}</span>                      
                      
                    </div>
                    <div class="vertical-container">
                        {% for p in usd.permisos %}
                            {% if p.nombre == 'usuarios' %}                    
                                {% if p.u == 1 %}
                                <!-- poner boton editar -->
                                <a href="/usuarios/editar/{{u.id}}" class="m-btn btn btn-primary">
                                    <i class="la la-edit"></i>
                                </a>
                                {% endif %}
                                {% if p.r == 1 %}
                                <a href="/usuarios/detalle/{{u.id}}" class="m-btn btn btn-success">
                                    <i class="la la-eye"></i>
                                </a>
                                {% endif %}
                                {% if p.d == 1 and u.active == 1 %}
                                <button type="button" class="m-btn btn btn-danger confirm_action_data" data-token="{{token}}" data-idcontainer="user_thumb_{{loop.parent.loop.index}}" data-toggle="modal" data-confirm="{{u.id}}"  data-target="#m_modal_confirm_delete"><i class="la la-remove"></i></button> 
                                {% endif %} {% if p.u == 1 and u.active != 1 %}
                                <button type="button" class="m-btn btn btn-primary confirm_action_activate" data-token="{{token}}" data-idcontainer="user_thumb_{{loop.parent.loop.index}}" data-toggle="modal" data-confirm="{{u.id}}"  data-target="#m_modal_confirm_active"><i class="la la-check"></i></button> 
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    </div>                
           </article>
            {% endfor %} 
          </section>
        </div>
      </div>
    </div>
    <!-- Final de contenido -->
  </div>
  <div class="col-xl-1">
    <!--begin:: Widgets/Blog-->
    <!--end:: Widgets/Blog-->
  </div>
  <!-- Modales -->
  {% if usd.rol == 1 %}
  <div class="modal fade" id="m_modal_confirm_delete" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <!-- <form action=""> -->
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Eliminar usuario</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <h4>¿Esta seguro que desea eliminar el usuario?</h4>
          <!-- <input type="text" value="{{u.id}}" class="hide" name="id_user_delete"> -->
        </div>
        <div class="modal-footer">
          <form id="frm_confirm_delete">
            <input type="hidden" name="token" value="{{token}}">
            <input type="hidden" name="id_user_delete" value="" id="id_user_delete">
            <button class="btn btn-primary" type="submit "  id="btn_confirm_delete"> Aceptar</button>
          </form>                                
          <!-- </form> -->
          <button class="btn btn-danger" data-dismiss="modal"> Cancelar</button>                        
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="m_modal_confirm_active" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <!-- <form action=""> -->
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Restaurar usuario</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <h4>¿Esta seguro que desea restaurar el usuario?</h4>
          <!-- <input type="text" value="{{u.id}}" class="hide" name="id_user_delete"> -->
        </div>
        <div class="modal-footer">
          <form id="frm_confirm_restore">
            <input type="hidden" name="token" value="{{token}}">
            <input type="hidden" name="id_user_restore" value="" id="id_user_restore">
            <button class="btn btn-primary" type="submit "  id="btn_confirm_restore"> Aceptar</button>
          </form>                                
          <!-- </form> -->
          <button class="btn btn-danger" data-dismiss="modal"> Cancelar</button>                        
        </div>
      </div>
    </div>
  </div>
  {% endif %}
  {% endblock %} {% block scripts %}

  <script src="/assets/app/js/user.js" type="text/javascript"></script>
  {% endblock %}