<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 4
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Dribbble: www.dribbble.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
Renew Support: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<html lang="es-ES">
<!-- begin::Head -->

<head>
    <meta charset="utf-8" />
    <title>
        {{ title }} | Ecuela innovadora
    </title>
    <meta name="description" content="Latest updates and statistic charts">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!--begin::Web font -->
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script scr="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <script>
    WebFont.load({
        google: { "families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"] },
        active: function() {
            sessionStorage.fonts = true;
        }
    });
    </script>
    <style>
    .sprite_parent {
        position: relative;
        width: 100%; 
        margin: 0 auto;
    }

    .sprite_parent:before {
        content: "";
        display: block;
        padding-top: 36.37%;
    }

    .guy {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
           max-width: 180px;
    max-height: 72px;
        bottom: 0;
        background: url(/assets/app/media/img/logos/descarga.png) no-repeat 0 0%;
        background-size: cover;
        animation: run-y 7s forwards  steps(153);
    }

    @keyframes run-y {
        0% {
            background-position-y: 0%;
        }
        50% {
            background-position-y: 100%;
        }
        100% {
            background-position-y: 100%;
        }
    }

    @media (max-width: 992px) {
        .image_top_nav {
            display: none !important
        }
    }
    </style>
    <!--end::Page Vendors -->
    {% include 'masterIncludes/styles/masterStyles.html'%}


    {% block styles %}{% endblock %}
    <!--end::Base Styles -->
    <link rel="shortcut icon" href="/assets/demo/default/media/img/logo/favicon.ico" />
</head>
<!-- end::Head -->
<!-- end::Body -->

<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-light m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
    <!-- begin:: Page -->
    <div class="m-grid m-grid--hor m-grid--root m-page">
        <!-- BEGIN: Header -->
        <header class="m-grid__item    m-header " data-minimize-offset="200" data-minimize-mobile-offset="200">
            <div class="m-container m-container--fluid m-container--full-height">
                <div class="m-stack m-stack--ver m-stack--desktop">
                    <!-- BEGIN: Brand -->
                    <div class="m-stack__item m-brand  m-brand--skin-dark theme_trebol">
                        <div class="m-stack m-stack--ver m-stack--general">
                            <div class="m-stack__item m-stack__item--middle m-brand__logo sprite_parent">
                                <div class="guy"></div>
                            </div>
                            <div class="m-stack__item m-stack__item--middle m-brand__tools">
                                <!-- BEGIN: Left Aside Minimize Toggle -->
                                <a id="m_aside_left_minimize_toggle" class="m-brand__icon  m-brand__toggler--left m--visible-desktop-inline-block">
                                  E
                                    <span></span>
                                </a>
                                <!-- END -->
                                <!-- BEGIN: Responsive Aside Left Menu Toggler -->
                                <a href="javascript:;" id="m_aside_left_offcanvas_toggle" class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-tablet-and-mobile-inline-block">
                                    <span></span>
                                </a>
                                <!-- END -->
                                <!-- BEGIN: Topbar Toggler -->
                                <a id="m_aside_header_topbar_mobile_toggle" href="javascript:;" class="m-brand__icon m--visible-tablet-and-mobile-inline-block">
                                    <i class="flaticon-more"></i>
                                </a>
                                <!-- BEGIN: Topbar Toggler -->
                            </div>
                        </div>
                    </div>                
                    <!-- END: Brand -->
                    <div class="m-stack__item m-stack__item--fluid m-header-head" id="m_header_nav" style="    display: flex !important; background: #31a7aa; flex-direction: row-reverse;">
                        <!-- BEGIN: Horizontal Menu -->
                        <div id="m_header_topbar" class="m-topbar  m-stack m-stack--ver m-stack--general" style="margin-right: 10%">
                            <div class="m-stack__item m-topbar__nav-wrapper">
                                <ul class="m-topbar__nav m-nav m-nav--inline">
                                    <li class="m-nav__item image_top_nav">
                                        <a href="/usuarios/usuario" class="m-nav__link m-dropdown__toggle">
                                            <span class="m-nav__link-badge m-badge m-badge--dot m-badge--info m--hide"></span>
                                            <span class="m-nav__link-icon">
                                                 <img class="profile_img_master" src="{{usd.profile_img}}" style="width: 55px;border-radius: 50%;" alt="">
                                            </span>
                                        </a>
                                    </li>
                                    <li class="m-nav__item ">
                                        <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-left" data-dropdown-toggle="click" aria-expanded="true" style="        margin-top: 36%; ">
                                            <a href="#" class="m-dropdown__toggle dropdown-toggle">
                               <strong>{{usd.nick}}</strong>
                            </a>
                                            <div class="m-dropdown__wrapper">
                                                <span class="m-dropdown__arrow m-dropdown__arrow--left"></span>
                                                <div class="m-dropdown__inner">
                                                    <div class="m-dropdown__body">
                                                        <div class="m-dropdown__content">
                                                            <ul class="m-nav">
                                                                <li class="m-nav__item">
                                                                    <a href="/usuarios/detalle/{{id_user_usd}} " class="m-nav__link">

                                                        <span class="m-nav__link-text">Mi perfil</span>
                                                    </a>
                                                                </li>
                                                                <li class="m-nav__item">
                                                                    <a href="/usuarios/editar " class="m-nav__link">

                                                        <span class="m-nav__link-text">Editar perfil</span>
                                                    </a>
                                                                </li>
                                                                <li class="m-nav__separator m-nav__separator--fit">
                                                                </li>
                                                                <li class="m-nav__item">
                                                                    <a href="/login/out" class="btn btn-danger" style="color: white">Cerrar sesi√≥n</a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div id="m_header_topbar" class="m-topbar  m-stack m-stack--ver m-stack--general" style="    padding-top: 1%;">
                            <div class="m-stack__item m-topbar__nav-wrapper">
                                <a href="/proyectos/misproyectos" class="btn btn-secondary m-btn m-btn--icon">
                                    <span>
                                        <i class="la la-bullseye"></i>
                                        <span>Mis Proyectos</span>
                                    </span>
                                </a>
                            </div>
                        </div>
                        <!-- END: Topbar -->
                    </div>
                </div>
            </div>
        </header>
        <!-- END: Header -->
        <!-- begin::Body -->
        <div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
            <!-- BEGIN: Left Aside -->
            <button class="m-aside-left-close  m-aside-left-close--skin-dark " id="m_aside_left_close_btn">
                <i class="la la-close"></i>
            </button>
            <div id="m_aside_left" class="m-grid__item  m-aside-left  m-aside-left--skin-light theme_trebol_dark">
                <!-- BEGIN: Aside Menu -->
                <div id="m_ver_menu" class="m-aside-menu normal-menu  m-aside-menu--skin-light m-aside-menu--submenu-skin-light theme_trebol_dark" data-menu-vertical="true" data-menu-scrollable="false" data-menu-dropdown-timeout="500" style="position: fixed; margin-top: 1%;">
                </div>
                <!-- END: Aside Menu -->
            </div>
            <!-- END: Left Aside -->
            <div class="m-grid__item m-grid__item--fluid m-wrapper">
                <!-- END: Subheader -->
                <div class="m-content">
                    <!--Begin::Section-->
                    <div class="row">
                        {% block contenido %}{% endblock %}
                    </div>
                    <!-- End  Instituciones-->
                </div>
            </div>
        </div>
        <!-- end:: Body -->
        <!-- begin::Footer -->
        <!-- end::Footer -->
    </div>
    <!-- end:: Page -->
    <!-- begin::Quick Sidebar -->
    <!-- end::Quick Sidebar -->
    <!-- begin::Scroll Top -->
    <div class="m-scroll-top m-scroll-top--skin-top" data-toggle="m-scroll-top" data-scroll-offset="500" data-scroll-speed="300">
        <i class="la la-arrow-up"></i>
    </div>
    {% include 'masterIncludes/scripts/masterScripts.html' %}  {% if flash %}
    <script>
    notify('{{flash.mensaje}}','{{flash.icon}}','{{flash.type}}')
    </script>
    {% endif %}{% block scripts %}{% endblock %}
    <!--end::Page Snippets -->
    <script>
    //ESTESCRIPT DEBE ESTAR EN LA MASTER
    /* $.get('http://cieroccidente.edu.co/dcardona/menu.php', function(data){
       let rpta = makingMenu(data, 0);
       $("body").html(rpta)
     });*/

    $(document).ready(function() {
        var user_menu = "{{usd.menu|json_encode()|escape('js')}}";
        user_menu = makingMenu(JSON.parse(user_menu), 0, "role='tablist'", "", "id='m_nav'", "", "");

        $("#m_ver_menu").html(user_menu);
        let pagina = '{{actualPage}}'
        console.log(pagina);
        $('.ul3').children().find('li').each(function() {
            if ($(this).attr('name') == pagina) {
                console.log($('.m-menu__nav').find('li').attr('name'));
                $(this).addClass('m-menu__item--active')
                $(this).addClass('theme_trebol_active')
            }
        });
    });

    function makingMenu(data, padre, role, collapse, id, aria, parent) {
        var menu = "",
            count = 0
        console.log(padre)
        $.each(data, function(k, v) {
            if (v.parent == padre) {
                count++;
                menu += "<li class='m-nav__item m-menu__item' name=" + v.name + ">";
                menu += v.parent != 0 ? "<a href=" + v.url + " class='m-menu__link'><i class='m-menu__link-icon " + v.icon + "'></i> <span class='m-menu__link-title'><span class='m-menu__link-wrap'><span class='m-menu__link-text'>" + v.title + "</span></span></span></a>" : "<a class='collapsed' role='tab' id='m_nav_link_" + count + "' data-toggle='collapse' href='#m_nav_sub_" + count + "' aria-expanded='false' ><p class='name-tittle'><i class='m-menu__link-icon icon-tittle  " + v.icon + "'></i><label class='tt'>" + v.title + "</label></p><i class='left_bottom la la-caret-down'></i></a>"
                let sm = makingMenu(data, v.id, "role='tabpanel'", "collapse m-nav__sub back", "id='m_nav_sub_" + count + "'", "aria-labelledby='m_nav_link_" + count + "'", "data-parent='#m_nav'")
                if (sm != false) {
                    menu += sm
                }
                menu += "</li>";
            }
        });
        return count > 0 ? "<ul class='m-nav m-menu__nav ul" + count + " " + collapse + "  m-nav--active-bg' " + id + " " + role + " " + aria + " " + parent + ">" + menu + "</ul>" : false;
    }
    </script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('.m-nav__item').on('click', function() {
            if ($(this).find('.left_bottom').css("transform") == 'none') {
                console.log('asd');
                $(this).find('.left_bottom').css("transform", "rotate(90deg)");
            } else {
                console.log('ff');
                $(this).find('.left_bottom').css("transform", "");
            }
        })

    })
    </script>
    <script src="/assets/app/js/isotope.pkgd.js" type="text/javascript"></script>
    <script>
    // quick search regex
    var qsRegex;

    // init Isotope
    var $grid = $('.grid').isotope({
        itemSelector: '.element-item',
        layoutMode: 'fitRows',
        filter: function() {
            return qsRegex ? $(this).text().match(qsRegex) : true;
        }
    });

    // use value of search field to filter
    var $quicksearch = $('.quicksearch').keyup(debounce(function() {
        qsRegex = new RegExp($quicksearch.val(), 'gi');
        $grid.isotope();
    }, 200));

    // debounce so filtering doesn't happen every millisecond
    function debounce(fn, threshold) {
        var timeout;
        threshold = threshold || 100;
        return function debounced() {
            clearTimeout(timeout);
            var args = arguments;
            var _this = this;

            function delayed() {
                fn.apply(_this, args);
            }
            timeout = setTimeout(delayed, threshold);
        };
    }
    </script>
</body>
<!-- end::Body -->

</html>